<!DOCTYPE html>
<html>
<head>
    <title>Text Generator Panel</title>
</head>
<body>
<h3>Text Generator</h3>

<!-- Model selection -->
<label for="model">Choose a model:</label>
<select id="model">
    <option value="gpt2-large">GPT-2 0.7B</option>
    <option value="opt-1b">OPT 1.3B</option>
    <option value="phi-1b">Phi 1.3B</option>
    <option value="bloom-1b">Bloom 1.7B</option>
</select>
<br><br>

<!-- Num tokens input -->
<label for="num_tokens">Number of tokens:</label>
<input type="number" id="num_tokens" value="32">
<br><br>

<!-- Text input -->
<label for="text">Input text:</label><br>
<textarea id="text" rows="4" cols="50"></textarea>
<br><br>

<!-- Run button -->
<button id="runText">Run Text Generator</button>

<pre id="output" style="background:#f0f0f0; padding:10px;"></pre>

<script>
function runStream() {
  const model = document.getElementById("model").value;
  const num_tokens = document.getElementById("num_tokens").value;
  const text = document.getElementById("text").value;

  const payload = { model, num_tokens, text };

  const source = new EventSourcePolyfill("https://YOUR_WORKER_URL", {
    headers: { "Content-Type": "application/json" },
    method: "POST",
    payload: JSON.stringify(payload)
  });

  const output = document.getElementById("output");
  output.textContent = "";

  source.onmessage = (event) => {
    if (event.data === "[DONE]") {
      source.close();
      return;
    }
    output.textContent += event.data + "\n";
  };
}
</script>

</body>
</html>
